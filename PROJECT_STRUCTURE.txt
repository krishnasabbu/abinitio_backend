DAG Execution Engine - Project Structure
=========================================

com.workflow.engine
├── DagExecutionEngineApplication.java          # Spring Boot main application

├── config/
│   └── BatchConfiguration.java                 # Spring Batch configuration with in-memory H2 repository

├── controller/
│   └── WorkflowController.java                 # REST API for workflow execution

├── execution/
│   ├── NodeExecutionContext.java               # Runtime context for node execution
│   ├── NodeExecutor.java                       # Core abstraction for node implementations
│   └── NodeExecutorRegistry.java               # Registry for managing node executors

├── failure/
│   ├── FailureHandler.java                     # Framework for handling node failures
│   ├── FailureHandlingListener.java            # Batch listener for failure events
│   └── NodeSkipPolicy.java                     # Custom skip policy for batch steps

├── graph/
│   ├── DagUtils.java                           # Utilities for DAG analysis and manipulation
│   └── GraphValidator.java                     # Validates workflow graphs before execution

├── metrics/
│   ├── MetricsCollectionListener.java          # Batch listener for metrics collection
│   ├── MetricsCollector.java                   # Collects and stores execution metrics
│   └── NodeMetrics.java                        # Metrics data model

├── model/
│   ├── Edge.java                               # Represents edges between nodes
│   ├── ExecutionHints.java                     # Execution configuration hints
│   ├── ExecutionMode.java                      # Enum: SERIAL, PARALLEL, PARTITIONED
│   ├── FailureAction.java                      # Enum: STOP, SKIP, RETRY, ROUTE
│   ├── FailurePolicy.java                      # Node failure handling configuration
│   ├── MetricsConfig.java                      # Metrics collection configuration
│   ├── NodeDefinition.java                     # Runtime node model
│   └── WorkflowDefinition.java                 # Complete workflow model

├── planner/
│   └── ExecutionPlanner.java                   # Converts DAG to Spring Batch Job/Flow

└── service/
    └── WorkflowExecutionService.java           # Orchestrates workflow validation and execution

KEY FEATURES:
=============

1. DAG to Spring Batch Conversion
   - Analyzes workflow graph structure
   - Creates parallel flows for independent branches
   - Handles control flow vs data flow edges
   - Ignores Start nodes at runtime

2. Extensible Node Execution
   - NodeExecutor interface defines contract
   - NodeExecutorRegistry manages implementations
   - Supports dynamic node type registration

3. Failure Handling
   - Per-node failure policies (STOP, SKIP, RETRY, ROUTE)
   - Spring Batch retry integration
   - Custom skip policies
   - Failure routing (placeholder for error sinks)

4. Metrics Collection
   - Automatic execution time tracking
   - Read/write/error count tracking
   - Per-node metrics configuration
   - In-memory metrics storage

5. Parallel Execution
   - Detects independent branches
   - Uses TaskExecutor for parallelism
   - Respects execution hints (SERIAL, PARALLEL)

6. Validation
   - Cycle detection
   - Node/edge validation
   - Executor availability checking
   - Source node verification

USAGE:
======

1. Implement NodeExecutor for your node types
2. Register with NodeExecutorRegistry
3. POST workflow JSON to /api/workflows/execute
4. Framework handles execution planning and orchestration

See USAGE_EXAMPLE.txt for detailed examples.

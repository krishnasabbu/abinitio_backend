DAG Execution Engine - Usage Example
=====================================

This is a framework-only implementation. To use it, you need to:

1. Implement NodeExecutor for your specific node types
2. Register them with NodeExecutorRegistry
3. Submit workflow JSON to the REST API

Example Workflow JSON:
{
  "id": "workflow-1",
  "name": "Sample ETL Workflow",
  "nodes": [
    {
      "id": "source-1",
      "type": "FileSource",
      "config": {
        "path": "/data/input.csv"
      },
      "executionHints": {
        "mode": "SERIAL",
        "chunkSize": 100
      },
      "metrics": {
        "enabled": true
      }
    },
    {
      "id": "transform-1",
      "type": "Transform",
      "config": {
        "operation": "filter"
      }
    },
    {
      "id": "sink-1",
      "type": "FileSink",
      "config": {
        "path": "/data/output.csv"
      }
    }
  ],
  "edges": [
    {
      "source": "source-1",
      "target": "transform-1",
      "isControl": false
    },
    {
      "source": "transform-1",
      "target": "sink-1",
      "isControl": false
    }
  ]
}

Submit via REST API:
POST http://localhost:8080/api/workflows/execute
Content-Type: application/json

[Workflow JSON above]

To implement a custom node executor:

@Component
public class FileSourceExecutor implements NodeExecutor<String, String> {

    @Override
    public String getNodeType() {
        return "FileSource";
    }

    @Override
    public ItemReader<String> createReader(NodeExecutionContext context) {
        // Implementation here
    }

    @Override
    public ItemProcessor<String, String> createProcessor(NodeExecutionContext context) {
        // Implementation here
    }

    @Override
    public ItemWriter<String> createWriter(NodeExecutionContext context) {
        // Implementation here
    }

    @Override
    public void validate(NodeExecutionContext context) {
        // Validation logic
    }

    @Override
    public boolean supportsMetrics() {
        return true;
    }

    @Override
    public boolean supportsFailureHandling() {
        return true;
    }
}

Then register it:

@Configuration
public class NodeExecutorConfig {

    @Bean
    public FileSourceExecutor fileSourceExecutor(NodeExecutorRegistry registry) {
        FileSourceExecutor executor = new FileSourceExecutor();
        registry.register(executor);
        return executor;
    }
}
